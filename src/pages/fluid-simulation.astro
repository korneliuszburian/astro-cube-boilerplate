---
import Layout from "../layouts/Layout.astro";
import GothicFrame from "../components/GothicFrame.astro";
import GothicButton from "../components/GothicButton.astro";
---

<Layout title="Fluid Simulation - Gothic Sanctuary" description="Interactive FLIP fluid simulation">
  <div class="fluid-simulation-page">
    <!-- Background -->
    <div class="fluid-simulation-page__background"></div>

    <!-- Fluid Simulation Section -->
    <section class="fluid-simulation-section">
      <canvas id="canvas"></canvas>
      <div class="render" id="render"></div>

      </section>

    <!-- Navigation - Under Canvas -->
    <nav class="fluid-simulation-page__nav">
      <GothicFrame variant="ornate" size="thick" background="none" class="nav-frame">
        <div class="nav-content-wrapper">
          <div class="nav-content">
            <GothicButton variant="button1" size="large" href="/hero-effects">
              ‚Üê HERO EFFECTS
            </GothicButton>
            <GothicButton variant="button2" size="large" href="/">
              MAIN MENU
            </GothicButton>
            <GothicButton variant="button1" size="large" href="/design-system">
              DESIGN SYSTEM
            </GothicButton>
          </div>
        </div>
      </GothicFrame>
    </nav>

  </div>

  <!-- Import the clean original fluid simulation -->
  <script src="/src/scripts/script.js"></script>

  <style>
    :root {
      --cell-size: 8px;
    }

    .fluid-simulation-page {
      min-height: 100vh;
      position: relative;
      background-color: #000;
      user-select: none;
    }

    /* Background */
    .fluid-simulation-page__background {
      background-image: url("/assets/videos/testing-video-poster-01.png");
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      z-index: -2;
      filter: brightness(0.4) contrast(1.1) saturate(0.7);
    }

    /* Fluid Simulation Section */
    .fluid-simulation-section {
      position: relative;
      width: 100%;
      height: 110vh;
      overflow: hidden;
    }

    /* Navigation - Under Canvas */
    .fluid-simulation-page__nav {
      position: relative;
      z-index: 1000;
      padding: 2rem 1rem;
      margin-top: -4rem; /* Pull up into the canvas area slightly */
    }

    .nav-frame {
      max-width: 800px;
      margin: 0 auto;
      position: relative;
    }

    .nav-content-wrapper {
      padding-block: 8px;
      padding-inline: 12px;
    }

    .nav-content {
      display: flex;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
    }

    #canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
      image-rendering: pixelated;
    }

    .render {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 2;
      pointer-events: none;
      font-family: "Geist Mono", monospace;
      white-space: pre;
      letter-spacing: 0.4em;
      color: var(--color-highlight-ivory);
      font-size: var(--cell-size, 8px);
      line-height: var(--cell-size, 8px);
      font-weight: 700;
    }

  
    /* Responsive Design */
    @media (max-width: 768px) {
      .nav-content {
        padding: 0.75rem 0.5rem;
      }
    }

    @media (max-width: 480px) {
      .nav-content {
        padding: 0.5rem 0.25rem;
        gap: 0.5rem;
      }
    }

    /* High contrast and reduced motion */
    @media (prefers-reduced-motion: reduce) {
      * {
        transition: none !important;
        animation: none !important;
      }
    }
  </style>
</Layout>